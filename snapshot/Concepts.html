<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at Jun 18, 2013
 | Rendered using Apache Maven Stylus Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta name="Date-Revision-yyyymmdd" content="20130618" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                                    
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
                                                        
<link rel="stylesheet" media="screen" href="css/bootstrap.min.css"/>
                              </head>
  <body class="composite">
    <div id="banner">
                                      <a href="#" id="bannerLeft">
                                                <img src="200px-Rose_logo.png" alt="" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                                   <div class="xleft">
        Last Published: 2013-06-18
                  &nbsp;| Version: 1.2.2-SNAPSHOT
                      </div>
            <div class="xright">        
                         </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                                                   <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                                              <li class="collapsed">
                  <a href="project-info.html">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                  <a href="project-reports.html">Project Reports</a>
                  </li>
          </ul>
                       <h5>Introduction</h5>
                  <ul>
                  <li class="none">
            <strong>Concepts</strong>
          </li>
                  <li class="none">
                  <a href="Getting-Started.html">Getting-Started</a>
            </li>
          </ul>
                       <h5>Protocols</h5>
                  <ul>
                  <li class="none">
                  <a href="Available-discovery-protocols.html">Discovery</a>
            </li>
                  <li class="none">
                  <a href="Available-invocation-protocols.html">Invocation</a>
            </li>
                                                                                                                    <li class="expanded">
                  <a href="#">Details</a>
                    <ul>
                      <li class="none">
                  <a href="JSON-RPC-(import-export).html">JSON-RPC</a>
            </li>
                      <li class="none">
                  <a href="JAX-RS-(export-only).html">JAX-RS</a>
            </li>
                      <li class="none">
                  <a href="XML-RPC-(import-export).html">XML-RPC</a>
            </li>
                      <li class="none">
                  <a href="JAX-WS-(import-export).html">JAX-WS</a>
            </li>
              </ul>
        </li>
          </ul>
                       <h5>API</h5>
                  <ul>
                  <li class="none">
                  <a href="Rest-API.html">REST API</a>
            </li>
                  <li class="none">
                  <a href="Rest-inspect-api.html">REST Inspect API</a>
            </li>
          </ul>
                       <h5>Exporters</h5>
                  <ul>
                  <li class="none">
                  <a href="Json-rpc-exporter.html">JSON-RPC Exporter</a>
            </li>
                  <li class="none">
                  <a href="JAX-RS-(export-only).html">Jax-Rs Exporter</a>
            </li>
          </ul>
                       <h5>Importers</h5>
                  <ul>
                  <li class="none">
                  <a href="Json-rpc-importer.html">JSON-RPC Importer</a>
            </li>
          </ul>
                       <h5>Custom Importers/Exporters</h5>
                  <ul>
                  <li class="none">
                  <a href="Create-your-own.html">Importer</a>
            </li>
          </ul>
                                 <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
          <img alt="Built by Maven" src="./images/logos/maven-feather.png"/>
        </a>
                       
                               </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><div class="section"><h3>RoSe Machine<a name="RoSe_Machine"></a></h3><p>The <b>Machine</b> is the core concept of RoSe. A machine allows you to export local OSGi services via different protocol (e.g web-services, http, json-rpc) and to create proxies in the OSGi broker for available remote services. </p><p>In order to <i>export</i> local services (available in the OSGi broker) you must add an <b>Out</b> connection to the machine. Similarly, in order to <i>import</i> remote services (available on the network) into the OSGi broker, you must add an <b>In</b> connection to the <b>Machine</b>. </p><p>However, only adding Out and In connections to the machine is not enough. Indeed, you must also declare <b>instances</b> of components that will create the endpoint, and proxies for the services, and remote services specified in the machine connections.</p><p>The following example show how to create a RoSe Machine through the <a href="./Java-Fluent-API.html">Java Fluent API</a>. In this sample, we create the machine of id machine, then we add an <b>Out</b> connection, which export all services of contract <i>org.toto.HelloWorld</i>. Finally, we create an instance of the <i>RoSe_exporter.jabsorb</i> component, so the out connection will use the Jabsorb (JSON-RPC) exporter to export the services.</p>
<div class="source"><pre>BundleContext context;
//...
Machine myMachine = machine(context,&quot;myMachine&quot;).host(&quot;localhost&quot;).create();
myMachine.out(&quot;(objectClass=org.toto.HelloWorld)&quot;).add();
myMachine.instance(&quot;RoSe_exporter.jabsorb&quot;).withProperty(&quot;jabsorb.servlet.name&quot;,&quot;/jsonrpc&quot;).create();
myMachine.start(); //start the machine!
</pre></div><p>You can add and remove Machines connections and instances at runtime, stopping the machine and starting it. There is three way to create the RoSe Machine: </p>
<ol style="list-style-type: decimal">
  <li>a programmatic way with the <a href="Java-Fluent-API.html">Java Fluent API</a>,</li>
  <li>a declarative way with the <a href="Json-Configuration.html">Json Configuration</a> files,</li>
  <li>over HTTP with the <a href="Rest-API.html">REST API</a>.</li>
</ol><p>Furthermore, you can check the Machines running in OSGi as well as the services exported and the remote services imported through those machines thanks to the <a href="./REST-Inspect-API.html">REST Inspect API</a>.</p>
<table border="0" class="bodyTable"><caption>Attributes</caption>
  <thead>
    <tr class="a">
      <th>Property</th>
      <th>Type</th>
      <th>Optional</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr class="b">
      <td>id</td>
      <td>String</td>
      <td colspan="2">false</td>
    </tr>
    <tr class="a">
      <td>host</td>
      <td>String</td>
      <td>true</td>
      <td>localhost</td>
    </tr>
    <tr class="b">
      <td>out</td>
      <td>OutConnection[]</td>
      <td colspan="2">true</td>
    </tr>
    <tr class="a">
      <td>in</td>
      <td>InConnection[]</td>
      <td colspan="2">true</td>
    </tr>
    <tr class="b">
      <td>instance</td>
      <td>Instance[]</td>
      <td colspan="2">true</td>
    </tr>
  </tbody>
  
</table></div><div class="section"><h3>In Connections<a name="In_Connections"></a></h3><p><b>TODO</b></p></div><div class="section"><h3>Out Connections<a name="Out_Connections"></a></h3><p>The Out connections allows you to export OSGi services. That is to say, to create endpoints for your OSGi services that will make them callable through the network. An Out connection must be link to a RoSe machine and contains a <i>service_filter</i>. The machine will then try to create an endpoint for each OSGi services matching the given filter. By default, the machine will use all Exporter linked to it in order to create the endpoint, you can also choose to use only some specific protocols by the setting the <i>protocol</i> property. </p>
<table border="0" class="bodyTable"><caption>Out attributes</caption>
  <thead>
    <tr class="a">
      <th>Property</th>
      <th>Type</th>
      <th>Optional</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr class="b">
      <td>service_filter</td>
      <td>LDAP String</td>
      <td colspan="2">false</td>
    </tr>
    <tr class="a">
      <td>protocol</td>
      <td>String[]</td>
      <td>true</td>
      <td>[&quot;*&quot;]</td>
    </tr>
  </tbody>
  
</table></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        &#169;            2013
              OW2 Consortium
            
                          - <a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a>.
        Apache Maven, Maven, Apache, the Apache feather logo, and the Apache Maven project logos are trademarks of The Apache Software Foundation.
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
